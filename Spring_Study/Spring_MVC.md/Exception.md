# 예외 처리, 오류 페이지, API 예외처리


### 1. 스프링이 아닌 순수 서블릿 컨테이너는 예외가 어떻게 처리될 수 있을까?
1. Exception(예외)가 발생하여 서블릿 밖으로 전달됨
    * 예외 발생 흐름 -> `WAS(여기까지 전파) <- 필터 <- 서블릿 <- 인터셉터 <- 컨트롤러(예외발생)`

2. response.sendError(HTTP 상태코드, 오류 메시지)가 호출 되었을때 설정된 오류 페이지를 찾음
    * sendError 흐름 -> `WAS(sendError 호출 기록 확인) <- 필터 <- 서블릿 <- 인터셉터 <- 컨트롤러(response.sendError())`

* 어떻게 오류 페이지를 찾을까 ?
    * WAS는 해당 예외를 처리하는 오류 페이지 정보를 확인한다.
    * `new ErrorPage(RuntimeException.class, "/error-page/500");`
    * 위 코드의 경우 RuntimeException일때 /error-page/500에 해당하는 페이지(컨트롤러)를 찾음

* 즉, 정리하면
1. 예외가 발생해서 WAS까지 전파된다.
2. WAS는 오류 페이지 경로를 찾아서 내부에서 오류 페이지를 호출한다. 이때 오류 페이지 경로로 필터,
서블릿, 인터셉터, 컨트롤러가 모두 다시 호출된다.

* 중요한 점은 웹 브라우저(클라이언트)는 **서버 내부에서 이런 일이 일어나는지 전혀 모른다는 점**이다. 오직
서버 내부에서 오류 페이지를 찾기 위해 추가적인 호출을 한다.




<br> <br>

### 2. 




<br> <br>

### 3. 



<br> <br>

### 4. 



<br> <br>

### 5. 



<br> <br>

### 6. 



<br> <br>

### 7. 



<br> <br>

### 8. 



<br> <br>

### 9. 



<br> <br>

### 10. 

